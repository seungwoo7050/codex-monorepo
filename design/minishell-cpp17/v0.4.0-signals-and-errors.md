# minishell-cpp17 v0.4.0 - 시그널 및 오류 처리 설계

## 목표
- Ctrl+C로 현재 실행 중인 파이프라인을 중단하되 셸 루프는 유지한다.
- Ctrl+D(EOF) 입력 시 깔끔하게 종료한다.
- 파싱/실행 단계에 구조화된 오류 메시지를 제공한다.

## 외부 동작
- 프롬프트가 지속적으로 출력되고, 빈 입력은 무시된다.
- Ctrl+C 입력 시 현재 명령이 중단되고 새 프롬프트가 출력된다.
- Ctrl+D로 EOF가 발생하면 마지막 종료 코드를 반환하며 종료한다.
- 파이프/리다이렉션 오류 시 `파싱 오류: ...`, 실행 오류 시 `실행 오류: ...` 형태로 stderr에 표시한다.

## 내부 설계
- `sigaction`을 사용해 SIGINT를 잡고 `g_interrupted` 플래그 및 `g_child_group`에 SIGINT를 전달한다.
- 파이프라인 실행 시 첫 번째 자식 PID로 프로세스 그룹을 구성해 전체 파이프라인을 한 번에 중단한다.
- `ParseError`, `ExecutionError` 구조체를 도입해 오류 메시지와 종료 코드를 명확히 분리했다.
- 메인 루프는 `std::getline`을 반복 호출하며, 시그널 발생 시 스트림 상태를 초기화하고 프롬프트를 재출력한다.

## 테스트 전략
- 기존 파이프/리다이렉션, 빌트인, 환경 변수 테스트를 유지한다.
- `tests/signal_interrupt.sh`: sleep 실행 중 SIGINT를 보낸 뒤 추가 명령이 수행되는지 확인한다.
- `tests/eof_exit.sh`: 입력 없이 EOF로 종료할 때 오류 없이 종료하는지 확인한다.

## 추후 과제
- 히스토리 저장 및 멀티라인 편집 기능은 향후 버전에서 고려한다.
