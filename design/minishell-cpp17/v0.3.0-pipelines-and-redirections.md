# minishell-cpp17 v0.3.0 – 파이프라인과 리다이렉션

## 목표
- `|`, `<`, `>`, `>>`를 지원하는 단일 라인 파이프라인 실행을 제공한다.
- 파이프 단계 간 종료 코드와 출력 흐름을 유지한다.

## 범위
- 공백 단위 토큰화 후 파이프/리다이렉션 토큰을 분리해 AST 없이 명령 리스트로 구성.
- 각 명령은 입력/출력 파일을 선택적으로 갖고, 여러 프로세스를 파이프로 연결해 실행한다.
- 빌트인은 파이프가 없는 경우에만 선처리한다.

## 구현 메모
- `splitArguments`가 `|`, `<`, `>`, `>>`를 개별 토큰으로 인식하도록 수정했다.
- `parsePipeline`에서 명령 경계를 확인하고 리다이렉션 대상 누락 시 오류를 반환한다.
- `executePipeline`은 `pipe`로 FD 쌍을 생성하고, 각 자식에서 필요한 FD만 `dup2` 한 뒤 나머지를 닫는다.
- 리다이렉션은 `setupRedirection`으로 분리해 입력/출력 파일 교체 실패 시 즉시 종료하도록 처리했다.
- 종료 코드는 마지막 프로세스의 상태를 사용하며, 시그널 종료 시 128 + 시그널 번호를 반환한다.

## 테스트
- `tests/pipeline_basic.sh`: `echo one two | wc -w` 출력과 종료 코드 0을 확인.
- `tests/redirection_basic.sh`: `>`, `>>`, `<` 리다이렉션으로 파일 쓰기/읽기 흐름을 검증.
- 기존 `run_echo.sh`, `env_expansion.sh`, `builtin_*` 스크립트로 이전 기능 회귀 확인.

## 후속 과제
- 따옴표/이스케이프 처리와 에러 메시지 개선은 v0.4.0에서 다룬다.
- 다중 라인 입력 및 히스토리 기능은 이후 버전에서 검토한다.
