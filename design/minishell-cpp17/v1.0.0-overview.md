# minishell-cpp17 v1.0.0 개요

## 버전 목표
v0.1.0~v0.4.0에서 구현한 기능을 정리·안정화하여 포트폴리오에 바로 활용할 수 있는 셸을 제공한다. 실행 흐름과 오류 처리, 시그널 대응을 문서화하고 사용법을 간결히 정리한다.

## 외부 동작 요약
- `$ ` 프롬프트에서 입력을 받아 파이프(`|`), 리다이렉션(`<`, `>`, `>>`)을 포함한 명령을 실행한다.
- `$VAR` 환경 변수를 확장하며, 존재하지 않는 변수는 빈 문자열로 대체한다.
- 빌트인: `cd <path>`, `exit [status]`, `env`를 지원하며 단일 명령일 때 부모 프로세스에서 처리한다.
- Ctrl+C로 현재 실행 중인 파이프라인만 중단하고 프롬프트로 복귀한다. Ctrl+D(EOF) 시 루프를 종료한다.
- 명령 종료 후 종료 코드를 출력해 후속 동작을 확인할 수 있다.

## 내부 구조
- **토큰화/파싱**: 공백과 연산자(|, <, >, >>)를 분리하여 `Command` 목록을 생성한다. 파싱 오류는 `ParseError`로 표현한다.
- **환경 변수 확장**: 토큰화 전에 `$` 접두어를 탐색해 `environ`에서 값을 치환한다.
- **실행기**: 각 명령을 `fork`한 뒤 첫 자식의 PID를 기준으로 프로세스 그룹을 구성한다. 파이프 FD는 RAII 벡터에서 생성·닫힘을 관리한다. 리다이렉션 시 `open`/`dup2` 실패를 `ExecutionError`로 보고한다.
- **빌트인 처리기**: 단일 명령 시 부모에서 먼저 빌트인을 시도해 필요 없는 프로세스 생성을 피한다. `exit`는 플래그를 반환해 루프 종료를 제어한다.
- **시그널 처리**: `sigaction(SIGINT)` 핸들러가 인터럽트 플래그를 세우고 자식 프로세스 그룹에 SIGINT를 전달한다. 인터럽트가 발생하면 현재 파이프라인을 종료하고 프롬프트를 재출력한다.

## 테스트 전략
- CTest 기반 셸 스크립트로 실행 결과를 검증한다.
  - `MinishellRunsEcho`, `MinishellExpandsEnv`: 기본 실행과 환경 변수 확장 확인
  - `MinishellBuiltinsCdEnv`, `MinishellExitBuiltinStatus`: 빌트인 동작과 종료 코드 확인
  - `MinishellPipelineBasic`, `MinishellRedirectionBasic`: 파이프와 리다이렉션 처리
  - `MinishellSignalInterrupt`, `MinishellEofExit`: 시그널/EOF 처리
- 테스트는 v1.0.0에서도 그대로 유지되며, 포트폴리오 품질 검증 기준으로 사용한다.

## 향후 개선 여지
- 히스토리, 탭 완성 등 인터랙티브 편의 기능 추가
- 복잡한 따옴표/이스케이프 처리 고도화
- 보다 세분화된 오류 메시지와 상태 코드 매핑
