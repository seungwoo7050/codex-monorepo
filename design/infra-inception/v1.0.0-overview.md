# infra-inception v1.0.0 개요

## 버전 목표
app+db+redis+nginx+모니터링으로 구성된 스택을 포트폴리오에 바로 제시할 수 있도록 문서화와 기본 튜닝을 마무리한다. 실행/정지 절차와 핵심 설정 값을 명확히 기록한다.

## 외부 동작 요약
- `docker compose up -d`로 모든 서비스를 기동한다.
- Nginx 8080 포트로 app 서비스를 프록시하며, 정적 파일은 `services/nginx/static/`에서 제공한다.
- MariaDB는 `init.sql`을 통해 기본 스키마와 사용자 계정을 생성하고 문자셋을 `utf8mb4`로 설정한다.
- Redis는 캐시/세션 저장소 역할을 한다.
- Prometheus(9090)는 Nginx/app을 스크랩하고, Grafana(3000)는 대시보드 예시를 제공한다.

## 내부 구조
- **docker-compose.yml**: app, db, redis, nginx, prometheus, grafana 서비스 정의와 볼륨/네트워크 설정을 포함하며 모든 컨테이너에 `TZ=Asia/Seoul`을 지정한다.
- **DB 초기화**: `services/db/init.sql`에서 데이터베이스 생성, 사용자 권한 부여, 기본 테이블 정의 및 `utf8mb4_unicode_ci` 설정을 수행한다.
- **Nginx 설정**: `services/nginx/nginx.conf`에서 gzip 활성화, 요청 시간 기반 로그 포맷(`log_format timed`)을 정의하고 app 프록시/정적 파일 루트를 지정한다.
- **모니터링**: `services/monitoring/prometheus.yml`에서 스크랩 타겟을 정의하고, Grafana는 기본 프로비저닝 예시를 포함하도록 디렉터리 구조가 준비되어 있다.

## 테스트 전략
- `tests/compose_lint.sh` 스크립트로 주요 서비스 정의, 파일 존재 여부, 타임존/문자셋/모니터링 설정 포함 여부를 정적 검증한다.
- 포트 충돌이나 Docker 환경 차이 없이 구성이 유지되도록 lint 중심으로 확인한다.

## 향후 개선 여지
- 애플리케이션 예제 교체 및 CI 빌드/배포 파이프라인 추가
- Grafana 대시보드 JSON 템플릿 제공 및 알림 규칙 연동
- TLS 종단 및 실 서비스 로그/메트릭 연동 예제 추가
