# infra-inception v0.3.0 – 한국 웹 환경 튜닝

## 목표
- 모든 컨테이너의 타임존을 `Asia/Seoul`로 통일한다.
- DB 문자셋을 `utf8mb4`/`utf8mb4_unicode_ci`로 지정한다.
- Nginx에 한국 트래픽 기준 타임아웃과 gzip, 로그 포맷을 적용한다.

## 범위
- docker-compose 서비스 환경 변수에 `TZ=Asia/Seoul` 추가.
- MariaDB 서버 시작 옵션에 문자셋/콜레이션/타임존 지정.
- 앱 컨테이너는 tzdata를 설치하고 TZ 환경변수를 응답 본문에 노출.
- Nginx 설정에서 gzip 활성화, 요청/업스트림 시간 포함 로그 포맷 정의, 타임아웃 조정.

## 구현 메모
- `services/app/Dockerfile`에서 tzdata 설치 후 `/etc/localtime`을 서울로 링크해 이미지 기본 타임존을 맞췄다.
- `services/db/init.sql`에서 DB/테이블 모두 utf8mb4로 강제하고 기본 노트를 v0.3.0으로 갱신했다.
- `services/nginx/nginx.conf`에 `log_format timed`를 추가해 `request_time`과 `upstream_response_time`을 기록한다.
- `docker-compose.yml`에 MariaDB 명령행 옵션을 추가해 런타임 설정을 보장했다.

## 테스트
- `tests/compose_lint.sh`: TZ 설정, utf8mb4 키워드, gzip/로그 포맷 존재 여부를 확인.

## 후속 과제
- 실환경 배포용으로 TLS 설정과 헬스체크 엔드포인트를 추가하는 작업은 v0.4.0에서 진행한다.
- Redis 영속성과 백업 정책은 별도 설계 문서에서 다룬다.
