# webserv-cpp17 v0.4.0 - 동적 핸들러 설계

## 목표
- 정적 응답 외에 간단한 동적 엔드포인트(/health, /metrics)를 제공한다.
- HTTP/1.1 핵심 기능(Host, keep-alive)을 유지하면서 라우팅을 최소화한다.

## 외부 동작
- `/health` : 200 OK, `status: ok` 본문.
- `/metrics` : 200 OK, `requests_total` 등 단순 메트릭 텍스트.
- 기타 경로는 기존 v0.3.0의 기본 인사 메시지를 반환한다.
- GET 이외의 메서드로 동적 경로를 호출하면 405 상태와 안내 문구를 반환한다.

## 내부 설계
- `handleDynamicRoute` 함수를 추가해 메서드/경로별 동적 본문과 상태 코드를 결정한다.
- 기존 `buildResponse`를 일반화해 404/405와 같은 코드도 처리한다.
- 메인 루프는 기존 keep-alive/Host 검증 흐름을 유지하며, 동적 경로가 아닌 경우 기존 본문을 생성한다.
- 설정 파일 예시(`configs/dev.conf`)를 추가해 기본 실행 인자와 건강 체크 요청 예시를 제공한다.

## 테스트 전략
- 기존 단일 요청, 멀티 요청, Host 헤더, keep-alive 테스트를 유지한다.
- `tests/test_webserv_dynamic.sh`: /health, /metrics 엔드포인트의 본문과 상태 코드를 검증한다.

## 추후 과제
- 동적 라우터를 설정 파일 기반으로 확장하거나 CGI 실행을 추가하는 기능을 v1.0.0에서 검토한다.
